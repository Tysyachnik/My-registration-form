<p-stepper [value]="activeStep()" (click)="clickOnStep($event)" class="max-w-4xl mx-auto">
  <p-step-list>
    <p-step [value]="RegistrationStep.Method">Method</p-step>
    <p-step [value]="RegistrationStep.Basic">Basic</p-step>
    <p-step [value]="RegistrationStep.Additional">Additional</p-step>
    <p-step [value]="RegistrationStep.Confirm">Confirm</p-step>
  </p-step-list>

  <p-step-panels>
    <p-step-panel [value]="1">
      <ng-template #content let-activateCallback="activateCallback">
        <form [formGroup]="form">
          <app-first-method formControlName="method"></app-first-method>
        </form>
        <div class="flex justify-end pt-6">
          <p-button
            label="next"
            (onClick)="activateCallback(RegistrationStep.Basic)"
            [disabled]="!form.controls['method'].valid"
          ></p-button>
        </div>
      </ng-template>
    </p-step-panel>
    <p-step-panel [value]="2">
      <ng-template #content let-activateCallback="activateCallback">
        <div [formGroup]="form">
          <app-second-basic formControlName="basic"></app-second-basic>
        </div>
        <div class="flex justify-end pt-6">
          <p-button label="back" (onClick)="activateCallback(RegistrationStep.Method)"></p-button>
          <p-button
            label="next"
            (onClick)="activateCallback(RegistrationStep.Additional)"
            [disabled]="!form.controls['basic'].valid"
          ></p-button>
        </div>
      </ng-template>
    </p-step-panel>
    <p-step-panel [value]="3">
      <ng-template #content let-activateCallback="activateCallback">
        <div [formGroup]="form">
          <app-third-extra formControlName="extra"></app-third-extra>
        </div>
        <div class="flex justify-end pt-6">
          <p-button label="back" (onClick)="activateCallback(RegistrationStep.Basic)"></p-button>
          <p-button
            label="next"
            (onClick)="activateCallback(RegistrationStep.Confirm)"
            [disabled]="!form.controls['extra'].valid"
          ></p-button>
        </div>
      </ng-template>
    </p-step-panel>
    <p-step-panel [value]="4">
      <ng-template #content>
        <div [formGroup]="form">
          <app-fourth-confirm formControlName="confirm"></app-fourth-confirm>
        </div>
        <div class="flex justify-end pt-6">
          <p-button label="back" (onClick)="goTo(RegistrationStep.Additional)"></p-button>
        </div>
        <p-button
          label="Finish registration"
          [disabled]="!form.controls['confirm'].valid"
          (onClick)="onSubmit()"
          class="mt-4"
        ></p-button>
      </ng-template>
    </p-step-panel>
  </p-step-panels>
</p-stepper>
